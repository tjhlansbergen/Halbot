@using System.Globalization

@{
    ViewData["Title"] = "Map";
    Layout = "_Layout";
}

@section styles {
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.5.0/dist/leaflet.js" integrity="sha512-3Wcxp7F9bV2pl+MBgrL6Pz7AJASLpemmQPIiPA0lDs3ImF0z4JuuMIBPeirLbgIuhfH2gJyGWZjvm6M+Zr7L6Q==" crossorigin=""></script>
}

<div id="mapid" style="width: 900px; height: 900px;"></div>

<script>

    var mymap = L.map('mapid').setView([52.145, 4.531], 4);

    L.tileLayer(
        'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw',
        {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets'
        }).addTo(mymap);

    markers = [
        @for (int i = 0; i < Model.Geos.Count; i++)
        {
            <text>{ lat: @Model.Geos[i].Lat.ToString(CultureInfo.InvariantCulture), lng: @Model.Geos[i].Lng.ToString(CultureInfo.InvariantCulture) },</text>
        }
    ];

    for (var i = 0; i < markers.length; ++i) {
        L.marker([markers[i].lat, markers[i].lng])
            .addTo(mymap);
    };

</script>


